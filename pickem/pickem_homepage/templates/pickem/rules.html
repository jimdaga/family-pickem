{% extends 'pickem/base.html' %}
{% load static %}
{% load socialaccount %}

{% block mobile_title %}
    <div class="mobile-subtitle">
        <i class="fas fa-gavel mr-2"></i>League Rules
    </div>
{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto px-4 py-6">
    <!-- Page Header (Hero Section) -->
    <div class="relative text-center mb-6 px-4 py-8 lg:py-12 overflow-hidden bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-700 dark:from-blue-600/30 dark:via-purple-600/20 dark:to-red-600/30 border-b-2 border-blue-800 dark:border-blue-500/40 shadow-xl animate-fade-in">
        <!-- Subtle background pattern -->
        <div class="absolute inset-0 opacity-20 dark:opacity-5 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0zNiAxOGMzLjMxNCAwIDYgMi42ODYgNiA2cy0yLjY4NiA2LTYgNi02LTIuNjg2LTYtNiAyLjY4Ni02IDYtNiIgc3Ryb2tlPSIjRkZGIiBzdHJva2Utd2lkdGg9IjIiLz48L2c+PC9zdmc+')] pointer-events-none"></div>

        <div class="relative z-10">
            <!-- Icon -->
            <div class="flex items-center justify-center mb-3 lg:mb-4">
                <i class="fas fa-gavel text-4xl lg:text-6xl text-primary"></i>
            </div>

            <!-- Title -->
            <h2 class="text-3xl lg:text-5xl font-black tracking-tight mb-2 lg:mb-3"
                style="font-family: 'Urbanist', sans-serif; text-transform: uppercase; letter-spacing: -0.02em; color: white; -webkit-text-stroke: 3px #FF6B1A; paint-order: stroke fill;">
                League Rules
            </h2>

            <!-- Subtitle -->
            <p class="text-base lg:text-xl text-white/90 dark:text-text-secondary font-medium">
                Official guidelines and regulations for fair play
            </p>
        </div>
    </div>

            <!-- Rules Content -->
            <div class="section-container">
                <div class="section-header">
                    <h3 class="section-title">
                        <i class="fas fa-book me-2"></i>Official League Regulations
                    </h3>
                    <p class="section-subtitle">Please review all rules carefully to ensure fair competition</p>
                </div>

                <div class="rules-accordion" id="rulesAccordion">

                    <!-- Rule 1: Scoring System -->
                    <div class="rule-card">
                        <div class="rule-header" id="headingScoring">
                            <button class="rule-toggle" type="button"
                                    onclick="toggleRule(this)"
                                    aria-expanded="true"
                                    aria-controls="collapseScoring">
                                <div class="rule-icon-container">
                                    <i class="fas fa-calculator rule-icon"></i>
                                </div>
                                <div class="rule-title-container">
                                    <h5 class="rule-title">Scoring System</h5>
                                    <p class="rule-subtitle">Points, wins, losses, and weekly bonuses</p>
                                </div>
                                <div class="rule-arrow">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </button>
                        </div>
                        <div id="collapseScoring"
                             class="rule-collapse"
                             aria-labelledby="headingScoring">
                            <div class="rule-body">
                                <div class="rule-items">
                                    <div class="rule-item">
                                        <div class="rule-number">1.A</div>
                                        <div class="rule-content">
                                            <span class="rule-text">Wins are awarded <strong>1 point</strong></span>
                                            <div class="rule-visual">
                                                <i class="fas fa-plus-circle text-secondary-light dark:text-secondary"></i>
                                                <span class="text-sm text-text-secondary-light dark:text-text-secondary">+1 Point</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="rule-item">
                                        <div class="rule-number">1.B</div>
                                        <div class="rule-content">
                                            <span class="rule-text">Losses receive <strong>no points</strong></span>
                                            <div class="rule-visual">
                                                <i class="fas fa-minus-circle text-red-500 dark:text-red-400"></i>
                                                <span class="text-sm text-text-secondary-light dark:text-text-secondary">0 Points</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="rule-item">
                                        <div class="rule-number">1.C</div>
                                        <div class="rule-content">
                                            <span class="rule-text">Ties receive <strong>no points</strong></span>
                                            <div class="rule-visual">
                                                <i class="fas fa-equals text-yellow-500 dark:text-yellow-400"></i>
                                                <span class="text-sm text-text-secondary-light dark:text-text-secondary">0 Points</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="rule-item">
                                        <div class="rule-number">1.D</div>
                                        <div class="rule-content">
                                            <span class="rule-text">Weekly winners receive <strong>2 bonus points</strong></span>
                                            <div class="rule-visual">
                                                <i class="fas fa-trophy text-yellow-500 dark:text-yellow-400"></i>
                                                <span class="text-sm text-text-secondary-light dark:text-text-secondary">+2 Bonus</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Rule 2: Advanced Rules -->
                    <div class="rule-card">
                        <div class="rule-header" id="headingAdvanced">
                            <button class="rule-toggle" type="button"
                                    onclick="toggleRule(this)"
                                    aria-expanded="false"
                                    aria-controls="collapseAdvanced">
                                <div class="rule-icon-container">
                                    <i class="fas fa-cogs rule-icon"></i>
                                </div>
                                <div class="rule-title-container">
                                    <h5 class="rule-title">Advanced Rules</h5>
                                    <p class="rule-subtitle">Tiebreakers, game locks, and special circumstances</p>
                                </div>
                                <div class="rule-arrow">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </button>
                        </div>
                        <div id="collapseAdvanced"
                             class="rule-collapse collapsed"
                             aria-labelledby="headingAdvanced">
                            <div class="rule-body">
                                <div class="rule-items">
                                    <div class="rule-item">
                                        <div class="rule-number">2.A</div>
                                        <div class="rule-content">
                                            <span class="rule-text">Tiebreakers determined by <strong>closest total score</strong> (No Price is Right rules)</span>
                                            <div class="rule-visual">
                                                <i class="fas fa-bullseye text-primary"></i>
                                                <span class="text-sm text-text-secondary-light dark:text-text-secondary">Closest Wins</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="rule-item">
                                        <div class="rule-number">2.B</div>
                                        <div class="rule-content">
                                            <span class="rule-text">Secondary tiebreaker uses <strong>combined yards</strong> from Monday Night Football</span>
                                            <div class="rule-visual">
                                                <i class="fas fa-football-ball text-blue-500 dark:text-blue-400"></i>
                                                <span class="text-sm text-text-secondary-light dark:text-text-secondary">MNF Yards</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="rule-item">
                                        <div class="rule-number">2.C</div>
                                        <div class="rule-content">
                                            <span class="rule-text">Games <strong>lock automatically</strong> when they start</span>
                                            <div class="rule-visual">
                                                <i class="fas fa-lock text-red-500 dark:text-red-400"></i>
                                                <span class="text-sm text-text-secondary-light dark:text-text-secondary">Auto-Lock</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Rule 3: Bonus Rules -->
                    <div class="rule-card">
                        <div class="rule-header" id="headingBonus">
                            <button class="rule-toggle" type="button"
                                    onclick="toggleRule(this)"
                                    aria-expanded="false"
                                    aria-controls="collapseBonus">
                                <div class="rule-icon-container">
                                    <i class="fas fa-star rule-icon"></i>
                                </div>
                                <div class="rule-title-container">
                                    <h5 class="rule-title">Bonus Rules & Prizes</h5>
                                    <p class="rule-subtitle">Special rewards, entry fees, and championship rules</p>
                                </div>
                                <div class="rule-arrow">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </button>
                        </div>
                        <div id="collapseBonus"
                             class="rule-collapse collapsed"
                             aria-labelledby="headingBonus">
                            <div class="rule-body">
                                <div class="rule-items">
                                    <div class="rule-item">
                                        <div class="rule-number">3.A</div>
                                        <div class="rule-content">
                                            <span class="rule-text">Perfect Week bonus: <strong>$10 from each participant</strong></span>
                                            <div class="rule-visual">
                                                <i class="fas fa-gem text-secondary-light dark:text-secondary"></i>
                                                <span class="text-sm text-text-secondary-light dark:text-text-secondary">Perfect Week</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="rule-item">
                                        <div class="rule-number">3.B</div>
                                        <div class="rule-content">
                                            <span class="rule-text"><strong>$40 entry fee</strong> per person. Champion determined by most total points</span>
                                            <div class="rule-visual">
                                                <i class="fas fa-dollar-sign text-secondary-light dark:text-secondary"></i>
                                                <span class="text-sm text-text-secondary-light dark:text-text-secondary">$40 Entry</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="rule-item">
                                        <div class="rule-number">3.C</div>
                                        <div class="rule-content">
                                            <span class="rule-text">Tied champions continue into the <strong>playoffs</strong></span>
                                            <div class="rule-visual">
                                                <i class="fas fa-trophy text-yellow-500 dark:text-yellow-400"></i>
                                                <span class="text-sm text-text-secondary-light dark:text-text-secondary">Playoffs</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <!-- Rules Footer -->
                <div class="rules-footer mt-4">
                    <div class="footer-content text-center">
                        <div class="footer-icon">
                            <i class="fas fa-handshake"></i>
                        </div>
                        <h6 class="footer-title">Remember: Good Sportsmanship Above All</h6>
                        <p class="footer-text">
                            These rules ensure fair play and fun for everyone. Questions? Contact the commissioner.
                        </p>
                        <div class="footer-badges">
                            <span class="inline-flex items-center gap-1 px-3 py-1.5 bg-primary/10 dark:bg-primary/20 text-primary rounded-lg text-sm font-medium">
                                <i class="fas fa-users"></i>Family Friendly
                            </span>
                            <span class="inline-flex items-center gap-1 px-3 py-1.5 bg-secondary-light/20 dark:bg-secondary/20 text-secondary-light dark:text-secondary rounded-lg text-sm font-medium">
                                <i class="fas fa-balance-scale"></i>Fair Play
                            </span>
                            <span class="inline-flex items-center gap-1 px-3 py-1.5 bg-yellow-500/20 text-yellow-600 dark:text-yellow-400 rounded-lg text-sm font-medium">
                                <i class="fas fa-trophy"></i>Competitive
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Accordion JavaScript -->
    <script>
    function toggleRule(button) {
        const isExpanded = button.getAttribute('aria-expanded') === 'true';
        const targetId = button.getAttribute('aria-controls');
        const targetPanel = document.getElementById(targetId);
        const arrow = button.querySelector('.rule-arrow i');

        // Toggle the current panel
        if (isExpanded) {
            button.setAttribute('aria-expanded', 'false');
            targetPanel.classList.add('collapsed');
            arrow.style.transform = 'rotate(0deg)';
        } else {
            button.setAttribute('aria-expanded', 'true');
            targetPanel.classList.remove('collapsed');
            arrow.style.transform = 'rotate(180deg)';
        }
    }

    // Initialize first accordion to be open
    document.addEventListener('DOMContentLoaded', function() {
        const firstRuleArrow = document.querySelector('.rule-toggle .rule-arrow i');
        if (firstRuleArrow) {
            firstRuleArrow.style.transform = 'rotate(180deg)';
        }
    });
    </script>

{% endblock %}